# ë¹Œë”íŒ¨í„´

ê°œë…ì •ë¦¬ëŠ” ìš”ì•½ëœ í˜•íƒœë¡œ 9~10 ë¬¸ì¥ ì´ë‚´ì˜ ë¬¸ì¥ìœ¼ë¡œë§Œ ì •ë¦¬í•  ì˜ˆì •ì´ë‹¤. ë” ìì„¸í•œ ë‚´ìš©ì€ [ë°±ê¸°ì„ ë‹˜ì˜ ìŠ¤í„°ë”” ìë£Œ](https://github.com/keesun/study/blob/master/effective-java/item2.md) ì„ ë³´ê³  ë³µìŠµí•˜ëŠ”ê²Œ ë‚˜ì„ ê²ƒ ê°™ë‹¤. ì•„ë¬´ë¦¬ ì§ì ‘ ê°œë…ì„ ì •ë¦¬í•˜ë ¤ê³  í•´ë„, ë‚˜ë„ ëª¨ë¥´ê²Œ ë² ë¼ëŠ”ê²Œ ì•„ë‹Œê°€?í•˜ëŠ” ìƒê°ì´ ë“¤ì–´ì„œì´ë‹¤.<br>

ë‹¨ìˆœíˆ ìš”ì•½ëœ ëª‡ ê°œì˜ ë¬¸ì¥ê³¼ ë‚´ ì˜ê²¬ì„ ì¡°ê¸ˆ ì„ì–´ì„œ ê°œë…ì„ ì •ë¦¬í•´ë³´ê³ , ì˜ˆì œ ìœ„ì£¼ë¡œ ì •ë¦¬í•´ë³¼ ì˜ˆì •ì´ë‹¤.<br>

<br>

ìƒì„±ìì— ì¸ìë¥¼ ë°›ì•„ì„œ ê°ì²´ë¥¼ ìƒì„±ê³¼ ë™ì‹œì— ì´ˆê¸°í™” í•˜ëŠ” ê²ƒì€ ë©€í‹° ìŠ¤ë ˆë”©í™˜ê²½ì—ì„œ ê°ì²´ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ì´ˆê¸°í™”í•˜ê¸° ìœ„í•´ì„œì´ë‹¤. í•˜ì§€ë§Œ ìƒì„±ìì— ì¸ìê°€ ë§¤ìš° ë§ì„ ë•Œê°€ ìˆëŠ”ë° ì´ê²ƒì„ ëª¨ë‘ ê¸°ì–µí•˜ë©´ì„œ ì´ˆê¸°í™”í•˜ëŠ” ì½”ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ê³ í†µì´ë‹¤. <br>

ì´ë ‡ê²Œ ìƒì„±ìì— ì¸ìê°€ ë§ì„ ìˆ˜ë°–ì— ë¹Œë”íŒ¨í„´ì„ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ”ë°, ë¹Œë” íŒ¨í„´ì—ì„œ ê°ì²´ë‚´ì— ì¸ìë“¤ì„ ì´ˆê¸°í™” í• ë•Œ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ë¶ˆë³€ì„±ì„ í™•ë³´í•˜ëŠ”ì§€ ì˜ˆì œ ì½”ë“œë“¤ì„ í†µí•´ í™•ì¸í•´ë³¼ ì˜ˆì •ì´ë‹¤.<br>

<br>

## ëª©ì°¨

- [ì°¸ê³ ìë£Œ](#ì°¸ê³ ìë£Œ)<br>
- [ì•„ì‰¬ìš´ ì ](#ì•„ì‰¬ìš´-ì )<br>

<br>

## ì°¸ê³ ìë£Œ

- [Adopting Builder Pattern with Abstract class](https://cindystlai.wordpress.com/2017/04/20/adopting-builder-pattern-with-abstract-class/)<br>
  - Enum ì„ ì¡°í•©í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ Dto ë¥¼ ë¹Œë“œí•˜ëŠ” ë¹Œë”íŒ¨í„´ì„ êµ¬í˜„í•  ê²ƒì´ê¸° ë•Œë¬¸ì— ì´ ìë£Œê°€ ê°€ì¥ ë„ì›€ì´ ë˜ì—ˆë‹¤.<br>
- [ë°±ê¸°ì„ ë‹˜ì˜ ìŠ¤í„°ë”” ìë£Œ](https://github.com/keesun/study/blob/master/effective-java/item2.md)ë¥¼ ë³´ë©´ì„œ ì•„ì´ë””ì–´ë¥¼ ì–»ì—ˆê³  êµ¬ê¸€ì—ì„œ ìë£Œ ê²€ìƒ‰ í›„ [Adopting Builder Pattern with Abstract class](https://cindystlai.wordpress.com/2017/04/20/adopting-builder-pattern-with-abstract-class/)ì˜ ìë£Œê°€ ë” ë‚´ ì˜ˆì œì— ì˜ ë§ëŠ” ì¼€ì´ìŠ¤ì˜€ë˜ê²ƒ ê°™ë‹¤.<br>
- [altongmon.tistory.com - T extends íƒ€ì…, ì™€ì¼ë“œì¹´ë“œ íƒ€ì…, ì œë„ˆë¦­ íƒ€ì… ìƒì†](https://altongmon.tistory.com/241)<br>

- [HttpStatus ìƒíƒœì½”ë“œ (SpringFramework)](https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/http/HttpStatus.java) <br>
  - enum ê¸°ë°˜ì˜ HttpStatus ìƒíƒœì½”ë“œë¥¼ ì°¸ê³ í•´ì„œ, ì˜ˆì œì— í•„ìš”í•œ ë¶€ë¶„ë“¤ë§Œì„ ì¶”ë ¤ë‚´ì„œ êµ¬í˜„<br>
  - ì°¸ê³  : [github/spring-projects/spring-framework/.../HttpStatus.java](https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/http/HttpStatus.java)<br>

<br>

## ì•„ì‰¬ìš´ ì 

ì´ˆë°˜ì— ì˜ˆì œë¡œ ë­˜ ë§Œë“¤ì–´ì•¼í•˜ë‚˜ í•˜ê³  ì¡°ê¸ˆ ë§‰ë§‰í–ˆë‹¤. ì•„ë¬´ ìƒê°ì—†ì´ ë§Œë“¤ì–´ë³´ë‹¤ë³´ë‹ˆ... **ì•„í•˜... RequestDto ë¥¼ ë¹Œë”íŒ¨í„´ìœ¼ë¡œ êµ¬í˜„í•˜ë ¤ í–ˆë˜ê²Œ ë‚´ ë§ˆìŒì† ìƒìƒì´ì—ˆëŠ”ë° ResponseDtoë¥¼ ë§Œë“¤ì–´ë²„ë ¸ë„¤?** í•˜ëŠ” ìƒê°ì´ ë“¤ì—ˆë”ë¬ë‹¤. **ê·¸ëŸ°ë° ë§‰ìƒ ë˜ ìƒê°í•´ë³´ë‹ˆ ResponseDto ì—­ì‹œë„ ì œí’ˆ ë‚´ì—ì„œê³µí†µì ì¸ ê·œê²©í™”ë¥¼ í•˜ë ¤ê³  í•œë‹¤ë©´ í•„ìš”í•˜ì§€ ì•Šì„ê¹Œ?** í•˜ëŠ” ìƒê°ì„ í–ˆë‹¤.<br>

ê²°ë¡ ì€... ë‚˜ì¤‘ì— RequestDto Builder ì—­ì‹œë„ ì˜ˆì œë¡œ í•œë²ˆ ë” ë§Œë“¤ì–´ë³¼ ì˜ˆì •ì´ë‹¤ ğŸ™‚<br>

<br>

## í•µì‹¬ ìš”ì•½

ì•„ì£¼ ê°„ë‹¨í•œ ë¹Œë” íŒ¨í„´ì˜ í˜•ì‹ì„ í‘œí˜„í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ë‹¤. ë¹Œë” íŒ¨í„´ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ì •í•´ì ¸ìˆëŠ” ê²ƒì€ ì•„ë‹ˆì§€ë§Œ, ëŒ€ë¶€ë¶„ì˜ ì˜ˆì œì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì€ í˜•ì‹ì„ ì·¨í•˜ì§€ ì•Šì„ê¹Œ ì‹¶ë‹¤. ì£¼ë¡œ Inner Class ì˜ ì´ë¦„ì€ Builder ë¡œ ì§€ì •í•˜ê³ , ì™¸ë¶€ í´ë˜ìŠ¤ì˜ ìƒì„±ìì—ëŠ” Builder íƒ€ì… ê°ì²´ë¥¼ ë°›ì•„ì„œ ì´ˆê¸°í™”ë¥¼ ìˆ˜í–‰í•œë‹¤.<br>

```java
class ProductDto{
	private String grantType;
	// ...

	// private ìƒì„±ì
	private ProductDto(Builder builder){
		// ...
		this.grantType = grantType;
	}

	// Builder í´ë˜ìŠ¤, Inner Class ì´ë‹¤.
	public static class Builder{
		private String grantType;

		public Builder(){}

		// ì—¬ê¸°ë¥¼ ì°¸ê³  !!! this ë¥¼ ë¦¬í„´í•œë‹¤. ì¦‰ Builder ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë¦¬í„´í•˜ë©´ì„œ ì²´ì´ë‹ì´ ê°€ëŠ¥í•˜ë„ë¡ í•œë‹¤.
		public Builder grantType(String grantType){
			this.grantType = grantType;
			return this;
		}

		public ProductDto build(){
			return new ProductDto(this);
		}

	}

}
```

<br>

- ë°”ê¹¥ í´ë˜ìŠ¤ì¸ `ProductDto` í´ë˜ìŠ¤ì˜ private ìƒì„±ìëŠ” ì´ë„ˆí´ë˜ìŠ¤ì¸ `Builder` ì˜ Builder ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°›ëŠ” ìƒì„±ìë¥¼ ê°€ì§€ê³  ìˆë‹¤.<br>
- ê·¸ë¦¬ê³  `ProductDto` í´ë˜ìŠ¤ì˜ private ìƒì„±ì ì—ì„œëŠ”  ì „ë‹¬ë°›ì€ `Builder` íƒ€ì… ì¸ìŠ¤í„´ìŠ¤ë¡œ ìê¸° ìì‹ ì˜ í•„ë“œë“¤ì„ ì„¸íŒ…í•˜ê³  ìˆëŠ”ë‹¤.<br>
  - ex) this.grantType = builder.grantType; this.clientId = builder.clientId;<br>
- ê·¸ë¦¬ê³  `Builder` í´ë˜ìŠ¤ ë‚´ì—ëŠ” ë°”ê¹¥ í´ë˜ìŠ¤ì˜ í•„ë“œë“¤ì„ ë˜‘ê°™ì´ ê°€ì§€ê³  ìˆëŠ”ë‹¤.<br>
  - private String grantType;<br>
  - private String clientId;<br>
  - private String clientSecret;<br>
- Builder í´ë˜ìŠ¤ ìì‹ ì˜ setter ì™€ ê°™ì€ ì—­í• ì„ í•˜ëŠ” ì•„ë˜ì™€ ê°™ì€ ë©”ì„œë“œë“¤ì´ ìˆë‹¤. ê·¸ë¦¬ê³  ì²´ì´ë‹ì´ ê°€ëŠ¥í•˜ë„ë¡ ìê¸°ìì‹ ì˜ ì¸ìŠ¤í„´ìŠ¤ì¸ thisë¥¼ return í•œë‹¤. <br>
- `build()` <br>
  - ë°”ê¹¥í´ë˜ìŠ¤ì˜ ìƒì„±ìì— ë‚´ë¶€í´ë˜ìŠ¤ Builder ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë„˜ê²¨ì£¼ì–´ ë°”ê¹¥í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œë‹¤.<br>
  - ë°”ê¹¥í´ë˜ìŠ¤ì˜ ìƒì„±ìëŠ” private ì´ë¯€ë¡œ, ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•˜ê¸° ì–´ë µë‹¤.<br>

<br>

## Builder íŒ¨í„´ì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ 

ë³´í†µ ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ ë©¤ë²„ í•„ë“œë“¤ì„ ì´ˆê¸°í™”í•  ë•Œ ìƒì„±ê³¼ ë™ì‹œì— ì´ˆê¸°í™”í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤. ê·¸ë¦¬ê³  ë©¤ë²„ í•„ë“œëŠ” finalë¡œ ì„ ì–¸í•œë‹¤. ì¦‰, ìƒì„±ì ë‚´ì—ì„œ ê°ì²´ì˜ ì´ˆê¸°í™”ë¥¼ ìˆ˜í–‰í•œë‹¤. ì´ë ‡ê²Œ í•˜ëŠ” ì´ìœ ëŠ” ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ê°ì²´ì˜ ë¶ˆë³€ì„±ì„ í™•ë³´í•˜ê¸° ìœ„í•´ì„œì´ë‹¤. ì˜ˆë¥¼ ë“¤ë©´ ì•„ë˜ì™€ ê°™ì´ ìƒì„±ìë¥¼ ì“°ëŠ” ê²½ìš°ê°€ ë§ë‹¤.<br>

```java
class UserProfileDto{
  final String nickName;
  final String city;
  public UserProfileDto(final String nickName, final String city){
    this.nickName = nickName;
    this.city = city;
  }
}
```

<br>

ìœ„ì˜ ê²½ìš°ëŠ” í•„ë“œê°€ nickName ê³¼ city ë‘ê°œ ë°–ì— ì—†ì§€ë§Œ, ë³´í†µ í•„ë“œë“¤ì´ 30ê°œ ì´ìƒì„ ë„˜ì–´ê°€ëŠ” ê²½ìš°ë„ êµ‰ì¥íˆ ë§ì„ ê²ƒì´ë‹¤. ì´ ë•Œ ìƒì„±ìì— ì¼ì¼ì´ 30ê°œ ì´ìƒì˜ final í•„ë“œë“¤ì— ëŒ€í•´ ìƒì„±ìë¡œ ë‚˜ì—´í•  ê²½ìš° ìƒì„±ì ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒë„ ì¤‘ë…¸ë™ì´ê³ , í•´ë‹¹ ìƒì„±ìì˜ ì¸ìë¥¼ í•˜ë‚˜ í•˜ë‚˜ ë§ì¶”ëŠ” ì‘ì—…ë„ ì¤‘ë…¸ë™ì¼ ê²ƒ ê°™ë‹¤.<br>

```java
class UserProfileDto{
  final String nickName;
  final String city;
  final String val1;
  final String val2;
  final String val3;
  final String val4;
  final String val5;
  final String val6;
  final String val7;
  
  public UserProfileDto(String nickName, String city, String val1, String val2, ... ){
    this.nickName = nickName;
    this.city = city;
    this.val1 = val1;
    // ...
  }
}
```

<br>

ì´ë ‡ê²Œ ì¸ìê°€ ë§ì€ ìƒì„±ìë¥¼ ë§Œë“¤ ê²½ìš°ì— ëŒ€í•´, Java ì§„ì˜ì—ì„œëŠ” Builder íŒ¨í„´ì˜ ì‚¬ìš©ì„ ê¶Œì¥í•˜ê³  ìˆë‹¤. Effective Java ì—ì„œ ì–¸ê¸‰ë˜ëŠ” ë‚´ìš©ì¸ë°, ìì„¸í•œ ë‚´ìš©ì€ [ë°±ê¸°ì„ ë‹˜ì˜ ìŠ¤í„°ë”” ìë£Œ](https://github.com/keesun/study/blob/master/effective-java/item2.md) ì„ ì°¸ê³ í•˜ëŠ” ê²ƒì´ ë‚˜ì„ ê²ƒ ê°™ë‹¤.<br>

<br>

ë‚´ ìƒê°ì€ ë¹Œë” íŒ¨í„´ì„ ì¸ìê°€ ë§ì€ ìƒì„±ì ëŒ€ì‹ ì— ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ì•„ë˜ì˜ ë‘ ê°€ì§€ê°€ ì£¼ìš”í•œ ì´ìœ ì¸ ê²ƒ ê°™ë‹¤.<br>

- ìƒì„±ìì˜ ì¸ìê°€ ë§ì„ ê²½ìš°, êµ¬í˜„ìƒì˜ í¸ì˜ì„±ê³¼ ë†’ì€ ìœ ì§€ë³´ìˆ˜ì„±ì„ ì œê³µí•˜ê¸° ìœ„í•´ í•„ìš”<br>
- ê°ì²´ ìƒì„± ì§í›„ì˜ í•„ë“œì˜ ë¶ˆë³€ì„ ë³´ì¥í•´ì•¼ í•˜ëŠ”ë°, ìƒì„±ìì˜ ì¸ìê°€ ë§¤ìš° ë§ì„ ê²½ìš°, ë¹Œë” íŒ¨í„´ìœ¼ë¡œ êµ¬í˜„í•´ êµ¬í˜„ìƒì˜ í¸ë¦¬í•¨ê³¼ ë†’ì€ ìœ ì§€ë³´ìˆ˜ì„±ì„ ì œê³µí•˜ê¸° ìœ„í•´ í•„ìš”<br>

<br>

ì˜ˆë¥¼ ë“¤ë©´ ìœ„ì˜ UserProfileDto í´ë˜ìŠ¤ëŠ” ì•„ë˜ì™€ ê°™ì´ ë³€ê²½ê°€ëŠ¥í•˜ë‹¤.<br>

```java
package io.study.design_pattern.builder.messenger.response;

public class UserProfileDto {
	private String nickName;	// ë‹‰ë„¤ì„
	private String city;		// ì£¼ê±°ì§€ì—­

	public UserProfileDto(){}

	public static class Builder{
		private final UserProfileDto actualInstance = new UserProfileDto();

		public Builder(){}

		public Builder self(){
			return this;
		}

		public UserProfileDto build(){
			return actualInstance;
		}

		public Builder nickName(String nickName){
			actualInstance.setNickName(nickName);
			return self();
		}

		public Builder city(String city){
			actualInstance.setCity(city);
			return self();
		}
	}

	private void setNickName(String nickName) {
		this.nickName = nickName;
	}

	private void setCity(String city) {
		this.city = city;
	}

	public String getNickName() {
		return nickName;
	}

	public String getCity() {
		return city;
	}

	@Override
	public String toString() {
		return "UserProfileDto{" +
			"nickName='" + nickName + '\'' +
			", city='" + city + '\'' +
			'}';
	}
}
```

<br>

## ì˜ˆì œ 1. ê°„ë‹¨í•œ ë²„ì „ì˜ Builder - UserProfileDto

UserProfileDto ë¼ëŠ” ì´ë¦„ì˜ í´ë˜ìŠ¤ë¥¼ Builder íŒ¨í„´ì„ í†µí•´ êµ¬í˜„í•œ ê²ƒì„ í™•ì¸í•´ë³´ì.<br>

```java
package io.study.design_pattern.builder.messenger.response;

public class UserProfileDto {
	private String nickName;	// ë‹‰ë„¤ì„
	private String city;		// ì£¼ê±°ì§€ì—­

	public UserProfileDto(){}

	public static class Builder{
		private final UserProfileDto actualInstance = new UserProfileDto();

		public Builder(){}

		public Builder self(){
			return this;
		}

		public UserProfileDto build(){
			return actualInstance;
		}

		public Builder nickName(String nickName){
			actualInstance.setNickName(nickName);
			return self();
		}

		public Builder city(String city){
			actualInstance.setCity(city);
			return self();
		}
	}

	private void setNickName(String nickName) {
		this.nickName = nickName;
	}

	private void setCity(String city) {
		this.city = city;
	}

	public String getNickName() {
		return nickName;
	}

	public String getCity() {
		return city;
	}

	@Override
	public String toString() {
		return "UserProfileDto{" +
			"nickName='" + nickName + '\'' +
			", city='" + city + '\'' +
			'}';
	}
}

```

<br>

ì½”ë“œë¥¼ ìì„¸íˆ ë³´ë©´ ì•„ë˜ì™€ ê°™ì€ ëª‡ê°€ì§€ ì£¼ìš” íŠ¹ì§•ë“¤ì´ ëˆˆì— ëˆë‹¤.<br>

- UserProfileDto í´ë˜ìŠ¤ ë‚´ì˜ setter ë“¤ì´ ëª¨ë‘ private ë¡œ ì„ ì–¸ë˜ì–´ ìˆë‹¤.<br>
- UserProfileDto ê°ì²´ëŠ” ë‚´ë¶€í´ë˜ìŠ¤ì¸ Builder í´ë˜ìŠ¤ ë‚´ì— finalë¡œ ì¸ìŠ¤í„´ìŠ¤í™” í•˜ì—¬ ì„ ì–¸ë˜ì–´ ìˆë‹¤.<br>

<br>

**setter ë©”ì„œë“œë“¤ì„ private ë¡œ ì„ ì–¸**<br>

`UserProfileDto` í´ë˜ìŠ¤ ë‚´ì˜ `nickName` , `city` í•„ë“œëŠ” privateë¡œ ì„ ì–¸ë˜ì–´ ìˆê³ , setter ë©”ì„œë“œë“¤ ì—­ì‹œë„ ëª¨ë‘ private ë¡œ ì„ ì–¸ë˜ì–´ ìˆê¸° ë•Œë¬¸ì—, ëŸ°íƒ€ì„ ì‹œì ì— ì™¸ë¶€ì—ì„œ setter ë¥¼ í˜¸ì¶œí•˜ê±°ë‚˜ ê°œë³„ í•„ë“œì¸ `nickName`, `city` ë¥¼ ìˆ˜ì •í•˜ëŠ” ê²ƒì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤. (ë¬¼ë¡  ë¦¬í”Œë ‰ì…˜ìœ¼ë¡œ í•„ë“œë“¤ì„ ê°•ì œë¡œ ì„¸íŒ…í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ê¸°ëŠ” í•˜ì§€ë§Œ, ë¦¬í”Œë ‰ì…˜ì€ ë…¼ì™¸ë¡œ í•˜ê¸°ë¡œ í–ˆë‹¤.)<br>

<br>

**ë‚´ë¶€ í´ë˜ìŠ¤ Builder í´ë˜ìŠ¤ ë‚´ì— finalë¡œ UserProfileDto ê°ì²´ë¥¼ ì¸ìŠ¤í„´ìŠ¤í™” í•˜ì—¬ ì„ ì–¸**<br>

ìì„¸íˆ ë³´ë©´ Bill Pughì˜ ì‹±ê¸€í„´ê³¼ ì¡°ê¸ˆ ë‹®ì•„ìˆìŒì„ í™•ì¸ê°€ëŠ¥í•˜ë‹¤. í•˜ì§€ë§Œ Bill Pughì˜ ì‹±ê¸€í„´ê³¼ ë‹¤ë¥¸ ì ì€ Inner Class ì¸ Builder í´ë˜ìŠ¤ê°€ public static ìœ¼ë¡œ ì„ ì–¸ë˜ì–´ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. (Bill Pugh ì‹±ê¸€í„´ì—ì„œì˜ Inner Classì˜ ê²½ìš° Inner Class ê°€ private ë¡œ ì„ ì–¸ë˜ì–´ ìˆë‹¤ëŠ” ì ì´ ë‹¤ë¥´ë‹¤.) <br>

Builder í´ë˜ìŠ¤ ë‚´ì—ì„œ UserProfileDtoë¥¼ finalë¡œ ìƒì„±í•´ë‘ì–´, ë¶ˆë³€ì„±ì„ í™•ë³´í–ˆê³ , Inner Class ì¸ Builder ë‚´ì— UserProfileDto ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì„ ì–¸í•´ë‘ì–´ ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•˜ì§€ ëª»í•˜ë„ë¡ í•´ë‘ì—ˆë‹¤.

```java
public class UserProfileDto {
	private String nickName;	// ë‹‰ë„¤ì„
	private String city;		// ì£¼ê±°ì§€ì—­

	public UserProfileDto(){}
  
	public static class Builder{
		private final UserProfileDto actualInstance = new UserProfileDto();
    // ...
    public UserProfileDto build() {
      return actualInstance;
    }
  }
}
```

<br>

**í…ŒìŠ¤íŠ¸ ì½”ë“œ**<br>

```java
public class BuilderPatternResponseTest {

	@Test
	void ë‹¨ìˆœ_ë¹Œë”íŒ¨í„´_UserProfileDto_í…ŒìŠ¤íŠ¸(){
		UserProfileDto user1 = new UserProfileDto.Builder()
			.nickName("ì‹ ì‚¬ì„ë‹¹")
			.city("ë¶€ì²œ")
			.build();

		UserProfileDto user2 = new UserProfileDto.Builder()
			.nickName("ì¡´ë¦¬ì„ ìƒë‹˜")
			.city("ë‰´ìš”í¬")
			.build();

		Assertions.assertNotSame(user1, user2);
	}
  
  // ...
  
}
```

<br>

**ì¶œë ¥ê²°ê³¼**<br>

```plain
user1 = UserProfileDto{nickName='ì‹ ì‚¬ì„ë‹¹', city='ë¶€ì²œ'}
user2 = UserProfileDto{nickName='ì¡´ë¦¬ì„ ìƒë‹˜', city='ë‰´ìš”í¬'}
```

<br>

## ì˜ˆì œ 2. ì¡°ê¸ˆ ë³µì¡í•œ ë²„ì „ì˜ Builder

> ì°¸ê³ ìë£Œ : [Adopting Builder Pattern with Abstract class](https://cindystlai.wordpress.com/2017/04/20/adopting-builder-pattern-with-abstract-class/) <br>

<br>

ì´ë²ˆì—ëŠ” ì¡°ê¸ˆ ë” ë³µì¡í•˜ê²Œ ê¼¬ì•„ì„œ Dtoë¥¼ ë§Œë“¤ì–´ë³´ë ¤ê³  í•œë‹¤. ë§Œë“¤ì–´ë³´ë ¤ê³  í•˜ëŠ” í´ë˜ìŠ¤ëŠ”  ResponseDto, KakaoTalkResponseDto ì´ë‹¤. ResponseDto ëŠ” ì•½ê°„ì€ ê³µí†µì ì¸ ê·œê²©ì˜ ì„±ê²©ì„ ê°€ì§€ëŠ” ì‘ë‹µ ê°ì²´ì´ë‹¤. KakaoTalkResponseDto ëŠ” ResponseDto ì˜ ê¸°ëŠ¥ì„ í™•ì¥(extends) í•œ ìì‹ í´ë˜ìŠ¤ì´ë‹¤.<br>

<br>

**ResponseDto.java**<br>

ê³µí†µì ì¸ ì„±ê²©ì„ ê°€ì§€ê¸° ìœ„í•´ ResponseDto í´ë˜ìŠ¤ë¥¼ abstract ë¡œ ì„ ì–¸í–ˆë‹¤.<br>

```java
public abstract class ResponseDto {
	private HttpStatus status;

	private int code;

	private String message;

	protected abstract static class Builder<O extends ResponseDto, T extends Builder>{
		protected O actualInstance;
		protected T actualClassBuilder;

    // ì´ ë¶€ë¶„ì„ ì£¼ëª©í•˜ì.
		protected abstract O createActualInstance();
		protected abstract T getActualBuilder();

		protected Builder(){}

		public T code(int code){
			actualInstance.setCode(code);
			return self();
		}

		public T message(String message){
			actualInstance.setMessage(message);
			return self();
		}

		public abstract ResponseDto build();
		protected abstract T self();
	}

	protected void setCode(int code){
		this.code = code;
	}

	protected void setMessage(String message){
		this.message = message;
	}

	public HttpStatus getStatus(){
		return HttpStatus.valueOf(this.code);
	}

	public String getMessage(){
		return this.message;
	}

	public boolean isResponseSuccessful(){
		return this.status.is2xxSuccessful();
	}
}
```

<br>

ì˜¤ëŠ˜ì€ ì‹œê°„ì´ ë§ì§€ ì•Šì•„ì„œ ë‹¤ìŒ ë‚  ì •ë¦¬í•´ë†“ì„ ë‚´ìš©ë“¤ë§Œì„ ë¦¬ìŠ¤íŠ¸ ì—… í•´ë†“ì„ ì˜ˆì •ì´ë‹¤.<br>

- **abstract ë©”ì„œë“œ**<br>
  - ê° ìì‹ í´ë˜ìŠ¤ì—ì„œ ë°˜ë“œì‹œ êµ¬í˜„í•´ì•¼ í•˜ëŠ” ë©”ì„œë“œë“¤ì˜ ëª©ë¡ì€ ì•„ë˜ì™€ ê°™ë‹¤.<br>
  - createActualInstance() : O extends ResponseDto<br>
    - ìì‹ í´ë˜ìŠ¤ ìì‹ ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ì—­í• ì„ í•œë‹¤.
  - getActualBuilder() : T extends Builder<br>
    - ìì‹ í´ë˜ìŠ¤ê°€ ê°€ì§„ Builder ë¥¼ ë¦¬í„´í•œë‹¤.<br>
    - ì´ë²ˆ ì˜ˆì œì—ì„œëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. í•„ìš”í•  ê²ƒì´ë¼ê³  ìƒê°í•´ì„œ ë§Œë“¤ì–´ë†“ê¸´ í–ˆì§€ë§Œ ì‚¬ìš©í•˜ì§€ ì•Šê²Œ ë˜ì—ˆë‹¤.<br>
  - build() : ResponseDto<br>
  - self() : T í•˜ìœ„íƒ€ì…ì¸ Të¥¼ ë¦¬í„´í•œë‹¤. ë©”ì„œë“œ ì²´ì´ë‹ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ ì„ ì–¸ëœ ì¶”ìƒ ë©”ì„œë“œì´ë‹¤.<br>

- **setter**<br>
  - ë¹Œë”ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ìƒì„±ìì— ì¸ìê°€ ë§ì„ ë•Œ ì‚¬ìš©ì„±ì„ ì¡°ê¸ˆ ë” ì¢‹ê²Œ ë§Œë“¤ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.<br>
  - ê°ì²´ ìƒì„±ì‹œ ìƒì„±ìë¥¼ í†µí•´ ì´ˆê¸°í™”í•˜ê³ , ë©¤ë²„ í•„ë“œë¥¼ final ë¡œ ì„ ì–¸í•´ì„œ, setter ì˜ ì‚¬ìš©ì„ ê°€ê¸‰ì  ë°°ì œí•˜ëŠ” í¸ì´ë‹¤. í•˜ì§€ë§Œ ë¹Œë” íŒ¨í„´ì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ì„œ setterë¥¼ ì‚¬ìš©í•  ìˆ˜ ë°–ì— ì—†ê²Œ ë˜ì—ˆë‹¤.<br>
  - ì—¬ê¸°ì— ëŒ€í•œ ë°©ì§€ì±…ìœ¼ë¡œ setter ë¥¼ protected ë¡œ ì„ ì–¸í•´ë‘ì—ˆê³ , ì™¸ë¶€ì—ì„œ setterë¥¼ ì ‘ê·¼í•˜ì§€ ëª»í•˜ê³  ì˜¤ë¡œì§€ ìì‹ í´ë˜ìŠ¤ì—ì„œë§Œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ í•´ë‘ì—ˆë‹¤.<br>

<br>

**KakaoTalkResponseDto**<br>

```java
package io.study.design_pattern.builder.messenger.response;

import java.time.LocalDateTime;
import java.util.Optional;

public class KakaoTalkResponseDto extends ResponseDto{

	private final UserProfileDto userProfileDto;

	private LocalDateTime receivedTime;

	public static class Builder extends ResponseDto.Builder<KakaoTalkResponseDto, Builder>{

		private final UserProfileDto userProfileDto;

		public Builder(UserProfileDto userProfileDto){
			// ì°¸ê³ ) í˜¼ë™í•˜ê¸° ì‰¬ìš´ ì‚¬í•­
			// 	ë¬µì‹œì ìœ¼ë¡œ super(); ê°€ í˜¸ì¶œëœë‹¤. super() ëŠ” ResponseBuilder ì˜ Builder() ì´ë‹¤.
			// 	ì¦‰, ìƒìœ„ í´ë˜ìŠ¤ì˜ ìƒì„±ìê°€ í˜¸ì¶œëœë‹¤.
			// 	ê¸°ë³¸ ì¤‘ì˜ ê¸°ë³¸ì¸ ë‚´ìš©ì´ì§€ë§Œ, ì‚¬ëŒì˜ ì˜ì‹íë¦„ìœ¼ë¡œëŠ” ê°€ë” ë‹¹ì—°í•˜ë‹¤ëŠ” ë“¯ì´ í˜¼ë™í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤.
			// super();
      
			this.userProfileDto = Optional.of(userProfileDto).orElseGet(UserProfileDto::new);
			actualInstance = createActualInstance();
			actualClassBuilder = this;
		}

		public Builder receviedTime(LocalDateTime receivedTime){
			actualInstance.setReceivedTime(receivedTime);
			return self();
		}

		@Override
		public ResponseDto build() {
			return actualInstance;
		}

		@Override
		protected Builder self() {
			return this;
		}

		@Override
		protected KakaoTalkResponseDto createActualInstance() {
			return new KakaoTalkResponseDto(this.userProfileDto);
		}

		@Override
		protected Builder getActualBuilder() {
			return this;
		}
	}

	private KakaoTalkResponseDto(UserProfileDto userProfileDto){
		this.userProfileDto = userProfileDto;
	}

	private void setReceivedTime(LocalDateTime receivedTime){
		this.receivedTime = receivedTime;
	}

	@Override
	public String toString() {
		StringBuffer buffer = new StringBuffer();
		buffer.append("KakaoTalkResponseDto { \n")
			.append("\tuserProfileDto = " + userProfileDto)
			.append(", \n")
			.append("\treceivedTime = " + receivedTime)
			.append(", \n")
			.append("\tstatus = " + getStatus())
			.append(", \n")
			.append("\tmessage = " + getMessage())
			.append("\n")
			.append("} \n");

		return buffer.toString();
	}
}
```

<br>

**abstract ë©”ì„œë“œ ì˜¤ë²„ë¼ì´ë”©** <br>

- ResponseDto ë‚´ì˜ ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”©í•˜ê³  ìˆëŠ”ë°, ê·¸ ì¤‘ ì˜¤ë²„ë¼ì´ë”©í•œ ë©”ì„œë“œë“¤ì€ ì•„ë˜ì™€ ê°™ë‹¤.<br>

- createActualInstance() : KakaoTalkResponseDto<br>
- getActualBuilder() : Builder<br>
- build() : ResponseDto<br>
- self() : T í•˜ìœ„íƒ€ì…ì¸ Të¥¼ ë¦¬í„´í•œë‹¤. ë©”ì„œë“œ ì²´ì´ë‹ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ ì„ ì–¸ëœ ì¶”ìƒ ë©”ì„œë“œì´ë‹¤.<br>

<br>



